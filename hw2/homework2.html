<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3" defer></script>
  <title>Homework 2 - Distribution</title>
  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="../style.css?v=2">
</head>
<body class="container py-4">

<header class="mb-5 text-center">
  <h1>Homework 2</h1>
  <p class="lead">“Distribution”</p>
</header>

<main>
  <h2>The Concept of Distribution</h2>
  <p>Explain the concept of dataset and distribution using a DBMS and create a simple dataset. Compute the K univariate distribution (k <= 3)</p>

  <h2>Dataset</h2>
  <p>
    A <strong>dataset</strong> is a structured collection of related data, usually organized in
    <strong>tables</strong> that contain <em>rows</em> (records or observations) and <em>columns</em> (variables or attributes).
    Each column represents a different characteristic, while each row corresponds to one observation or data point.
  </p>

  <p>
    In a <strong>Database Management System (DBMS)</strong> such as Microsoft Access, MySQL, or SQLite,
    datasets are stored as tables that can be queried, filtered, and analyzed using SQL commands.
    This structure allows efficient data storage, retrieval, and analysis.
  </p>

  <h2>Example of a simple dataset</h2>
  <table>
    <tr>
      <th>ID</th>
      <th>Name</th>
      <th>Age</th>
      <th>Gender</th>
      <th>Grade</th>
    </tr>
    <tr>
      <td>1</td><td>Anna</td><td>21</td><td>F</td><td>28</td>
    </tr>
    <tr>
      <td>2</td><td>Marco</td><td>23</td><td>M</td><td>30</td>
    </tr>
    <tr>
      <td>3</td><td>Luca</td><td>20</td><td>M</td><td>27</td>
    </tr>
  </table>

  <div class="note">
    <strong>Observation:</strong> Each row represents one student, while each column represents a variable such as
    <code>Age</code> or <code>Grade</code>. The entire table is the dataset.
  </div>

  <h2>Distribution</h2>
  <p>
    A <strong>distribution</strong> describes how the values of a variable are <em>spread</em> or <em>arranged</em> within a dataset.
    It shows how often each value or range of values occurs. Studying the distribution helps us understand
    patterns, central tendencies, and variability in the data.
  </p>

  <h2>Types of Distributions</h2>

  <p><strong>Univariate Distribution</strong></p>
  <p>
    Focuses on <strong>one variable</strong> at a time. It shows how the values of a single variable
    (for example, <code>Age</code>) are distributed — which values are more frequent, rare, or central.
  </p>
  <p>
    Example: If most students are aged 21–23, the univariate distribution of <code>Age</code>
    will peak around that range.
  </p>

  <p><strong>Bivariate Distribution</strong></p>
  <p>
    Focuses on two variables simultaneously to explore relationships or correlations between them.
    For example, analyzing <code>Age</code> and <code>Grade</code> together might reveal whether older students
    tend to achieve higher grades.
  </p>

  <h2>Why These Concepts Matter</h2>
  <ul>
    <li>They help summarize large amounts of data.</li>
    <li>They make it easier to visualize trends and relationships.</li>
    <li>They are the foundation for statistical and probabilistic analysis.</li>
  </ul>
  
  <h2>Interactive Dataset and Distributions</h2>

  <p>
    This interactive demo uses a small dataset stored in JavaScript.
    You can compute and visualize univariate or bivariate distributions using Chart.js.
  </p>

  <section>
    <h2>Dataset</h2>
    <div class="card">
      <table>
        <tr><th>ID</th><th>Name</th><th>Age</th><th>Gender</th><th>Grade</th></tr>
        <tr><td>1</td><td>Anna</td><td>21</td><td>F</td><td>28</td></tr>
        <tr><td>2</td><td>Marco</td><td>23</td><td>M</td><td>30</td></tr>
        <tr><td>3</td><td>Luca</td><td>20</td><td>M</td><td>27</td></tr>
        <tr><td>4</td><td>Sara</td><td>22</td><td>F</td><td>26</td></tr>
        <tr><td>5</td><td>Giulia</td><td>21</td><td>F</td><td>30</td></tr>
      </table>
      <p class="hint">Rows = observations, columns = variables.</p>
    </div>
  </section>

  <!-- UNIVARIATE -->
  <section>
    <h2>Univariate Distribution</h2>
    <div class="controls">
      <label for="uniVar">Variable:</label>
      <select id="uniVar">
        <option value="">-- choose --</option>
        <option value="Age">Age (numeric)</option>
        <option value="Gender">Gender (categorical)</option>
        <option value="Grade">Grade (numeric)</option>
      </select>

      <button id="computeUni">Compute Univariate</button>
    </div>
    <div class="card">
      <canvas id="uniChart" width="600" height="260"></canvas>
    </div>
  </section>

  <!-- BIVARIATE -->
  <section>
    <h2>Bivariate Distribution</h2>
    <div class="controls">
      <label for="biVar1">Variable 1:</label>
      <select id="biVar1">
        <option value="">-- choose --</option>
        <option value="Age">Age (numeric)</option>
        <option value="Gender">Gender (categorical)</option>
        <option value="Grade">Grade (numeric)</option>
      </select>

      <label for="biVar2">Variable 2:</label>
      <select id="biVar2">
        <option value="">-- choose --</option>
        <option value="Age">Age (numeric)</option>
        <option value="Gender">Gender (categorical)</option>
        <option value="Grade">Grade (numeric)</option>
      </select>

      <button id="computeBi">Compute Bivariate</button>
    </div>
    <div class="card">
      <canvas id="biChart" width="600" height="260"></canvas>
    </div>
    <p class="hint">If both variables are numeric → scatter; if one is categorical → grouped bars.</p>
  </section>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      if (!window.Chart) {
        alert('Chart.js failed to load.');
        return;
      }

      // ---- DATASET ----
      const data = [
        { Name: "Anna",  Age: 21, Gender: "F", Grade: 28 },
        { Name: "Marco", Age: 23, Gender: "M", Grade: 30 },
        { Name: "Luca",  Age: 20, Gender: "M", Grade: 27 },
        { Name: "Sara",  Age: 22, Gender: "F", Grade: 26 },
        { Name: "Giulia",Age: 21, Gender: "F", Grade: 30 },
      ];

      // Helpers
      const isNumeric = v => typeof v === 'number';
      const getCol = (col) => data.map(r => r[col]);

      // ---- UNIVARIATE ----
      const uniCtx = document.getElementById('uniChart');
      const biCtx  = document.getElementById('biChart');
      let uniChart = null, biChart = null;

      function computeFrequency(arr){
        const freq = {};
        for (const v of arr) freq[v] = (freq[v] || 0) + 1;
        return freq; // object: value -> count
      }

      function renderUnivariate(variable){
        const col = getCol(variable);
        const allNumeric = col.every(v => typeof v === 'number');

        // For simplicity: categorical → bar counts; numeric → bar counts on distinct values (small dataset)
        const freq = computeFrequency(col);
        const labels = Object.keys(freq).map(String);
        const values = Object.values(freq);

        if (uniChart) uniChart.destroy();
        uniChart = new Chart(uniCtx, {
          type: 'bar',
          data: {
            labels,
            datasets: [{ label: `${variable} distribution`, data: values }]
          },
          options: {
            scales: { y: { beginAtZero: true } },
            plugins: {
              tooltip: { callbacks: { label: (ctx) => `Count: ${ctx.formattedValue}` } }
            }
          }
        });
      }

      // ---- BIVARIATE ----
      function renderBivariate(v1, v2){
        const col1 = getCol(v1);
        const col2 = getCol(v2);
        const num1 = col1.every(v => typeof v === 'number');
        const num2 = col2.every(v => typeof v === 'number');

        if (biChart) biChart.destroy();

        // Case 1: numeric-numeric → scatter
        if (num1 && num2){
          const points = data.map(r => ({ x: r[v1], y: r[v2] }));
          biChart = new Chart(biCtx, {
            type: 'scatter',
            data: { datasets: [{ label: `${v1} vs ${v2}`, data: points }] },
            options: {
              scales: {
                x: { title: { display: true, text: v1 } },
                y: { title: { display: true, text: v2 } }
              }
            }
          });
          return;
        }

        // Case 2: categorical-numeric → grouped bars
        // group numeric by category and show mean
        let catVar, numVar;
        if (!num1 && num2){ catVar = v1; numVar = v2; }
        else if (num1 && !num2){ catVar = v2; numVar = v1; }
        else {
          // Case 3: categorical-categorical → contingency table (clustered bars)
          const cats1 = Array.from(new Set(col1));
          const cats2 = Array.from(new Set(col2));
          const grid = cats2.map(() => Array(cats1.length).fill(0));
          data.forEach(r => {
            const i = cats2.indexOf(r[v2]);
            const j = cats1.indexOf(r[v1]);
            grid[i][j] += 1;
          });

          biChart = new Chart(biCtx, {
            type: 'bar',
            data: {
              labels: cats1,
              datasets: cats2.map((c, idx) => ({
                label: String(c),
                data: grid[idx]
              }))
            },
            options: { scales: { y: { beginAtZero: true } } }
          });
          return;
        }

        // grouped bars (mean by category)
        const cats = Array.from(new Set(getCol(catVar)));
        const means = cats.map(c => {
          const vals = data.filter(r => r[catVar] === c).map(r => r[numVar]);
          const avg = vals.reduce((a,b)=>a+b,0) / (vals.length || 1);
          return Number(avg.toFixed(2));
        });

        biChart = new Chart(biCtx, {
          type: 'bar',
          data: {
            labels: cats.map(String),
            datasets: [{ label: `Mean ${numVar} by ${catVar}`, data: means }]
          },
          options: {
            scales: { y: { beginAtZero: true } },
            plugins: {
              tooltip: { callbacks: { label: (ctx) => `Mean: ${ctx.formattedValue}` } }
            }
          }
        });
      }

      // Events
      document.getElementById('computeUni').addEventListener('click', () => {
        const v = document.getElementById('uniVar').value;
        if (!v) return alert('Pick a variable for Univariate.');
        renderUnivariate(v);
      });

      document.getElementById('computeBi').addEventListener('click', () => {
        const v1 = document.getElementById('biVar1').value;
        const v2 = document.getElementById('biVar2').value;
        if (!v1 || !v2) return alert('Pick two variables for Bivariate.');
        if (v1 === v2) return alert('Choose two different variables.');
        renderBivariate(v1, v2);
      });
    });
  </script>

  <p>========================================================================================================================================</p>
  
  <h2>Distribution application in Ceaser Chiper</h2>
  
  <p>Take a text and compute the distribution of the letters</p>
  <p>Apply a Ceaser Cipher (with random shift)</p>
  <p>Decode the encrypted text using the language distribution</p>
  
  <!-- Pulsante back -->
  <div class="mt-4 text-center">
    <a href="../index.html" class="btn btn-primary">← Back to Home</a>
  </div>
</main>

<footer class="mt-5 text-center">
  <hr>
  <p><small>&copy; 2025 Francesco – Homework 1</small></p>
</footer>

</body>
</html>

